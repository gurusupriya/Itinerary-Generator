<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>Itinerary PDF</title>

<style>
  @page { size: A4; margin: 14mm; }
  body { font-family: Helvetica, Arial, sans-serif; color:#222; margin:0; padding:0; }

  /* HEADER */
  .header { width:100%; display:table; margin-bottom:12px; }
  .header-left { display:table-cell; width:60%; vertical-align:top; }
  .header-right { display:table-cell; width:40%; text-align:right; vertical-align:top; }

  .title-small { color:#b76e3a; font-family:Georgia, serif; font-size:28px; margin-bottom:2px; }
  .title-big { color:#2a2a72; font-size:62px; font-weight:800; margin:0; letter-spacing:2px; }

  .meta-grid { margin-top:12px; display:table; width:100%; }
  .meta-col { display:table-cell; width:50%; vertical-align:top; padding-right:20px; }
  .meta-label { font-size:13px; color:#333; margin-bottom:4px; font-weight:600; }
  .meta-line { border-bottom:1px solid #bdbdbd; padding:7px 0; min-height:20px; font-size:13px; }

  /* SUMMARY BLOCK */
  .summary-block {
    padding:12px;
    background:#fdf5ea;
    border-radius:12px;
    margin-bottom:18px;
    page-break-inside:avoid;
  }
  .summary-title {
    font-size:19px;
    font-weight:800;
    color:#2a2a72;
    margin-bottom:10px;
  }
  .summary-row { font-size:13px; line-height:1.45; margin-bottom:4px; }

  /* DAY CARDS */
  .day-block {
    padding:12px;
    background:#f7e9d7;
    border-radius:12px;
    margin-bottom:18px;
    page-break-inside: avoid;
  }

  .day-title {
    font-size:22px;
    font-weight:800;
    color:#2a2a72;
    margin-bottom:12px;
  }

  .day-table { width:100%; border-collapse:collapse; table-layout:fixed; }
  .day-table td { vertical-align:top; padding:6px; }

  .img-wrap {
    width:200px;
    height:180px;
    border-radius:120px 120px 22px 22px;
    overflow:hidden;
    box-shadow:0 2px 6px rgba(0,0,0,0.18);
  }
  .img-wrap img { width:100%; height:100%; object-fit:cover; }

  /* Slot sections */
  .slot-title {
    font-weight:700;
    color:#b76e3a;
    font-size:15px;
    margin-top:6px;
    margin-bottom:4px;
  }

  .slot-desc ul {
    margin:0;
    padding-left:18px;
  }
  .slot-desc ul li {
    font-size:12.5px;
    margin-bottom:3px;
    line-height:1.35;
    color:#444;
  }

  .tips { font-size:12px; color:#444; margin-top:10px; }

  /* EXTRAS SECTION */
  .section-wrap { margin-top:20px; }
  .section { margin-bottom:18px; }
  .section h3 { color:#2a2a72; margin-bottom:6px; font-size:19px; font-weight:800; }
  .section p { margin:0; font-size:13.5px; line-height:1.45; white-space:pre-line; }

  footer { margin-top:12px; font-size:11px; color:#666; text-align:right; }
</style>
</head>

<body>

<!-- HEADER -->
<div class="header">
  <div class="header-left">
    <div class="title-small">Travel Planner</div>
    <div class="title-big">ITINERARY</div>

    <div class="meta-grid">
      <div class="meta-col">
        <div class="meta-label">Destination:</div>
        <div class="meta-line">{{ destination }}</div>
      </div>

      <div class="meta-col">
        <div class="meta-label">Duration:</div>
        <div class="meta-line">{{ duration }}</div>
      </div>
    </div>
  </div>

  <div class="header-right">
    {% if header_image_url %}
    <img src="{{ header_image_url }}" style="max-width:260px;">
    {% endif %}
  </div>
</div>

<!-- SUMMARY (IF AVAILABLE) -->
{% if summary %}
<div class="summary-block">
  <div class="summary-title">TRIP SUMMARY</div>

  <div class="summary-row"><strong>Total Places:</strong> {{ summary.total_places }}</div>
  <div class="summary-row">
    <strong>Places:</strong>
    {% if summary.places %} {{ summary.places | join(', ') }} {% endif %}
  </div>

  <div class="summary-row">
    <strong>Theme Coverage:</strong>
    Sightseeing {{ summary.theme_coverage.sightseeing }},
    Museums {{ summary.theme_coverage.museums }},
    Nature {{ summary.theme_coverage.nature }}
  </div>

  {% if summary.excitement_note %}
  <div class="summary-row"><em>{{ summary.excitement_note }}</em></div>
  {% endif %}
</div>
{% endif %}

<!-- DAYWISE LOOP -->
{% for d in daywise %}
<div class="day-block">

  <div class="day-title"> {{ d.title }}</div>

  <table class="day-table">
    <tr>
      <!-- IMAGE -->
      <td style="width:220px;">
        <div class="img-wrap">
          {% if d.day_image %}
            <img src="{{ d.day_image }}">
          {% else %}
            <img src="{{ header_image_url }}">
          {% endif %}
        </div>
      </td>

      <!-- RIGHT CONTENT -->
      <td>

        <!-- MORNING -->
        <div class="slot-title">Morning</div>
        <div class="slot-desc">
          <ul>
            {% if d.morning.early_place %}
            <li><strong>Early Morning (Optional):</strong> {{ d.morning.early_place }}</li>
            {% endif %}
            <li><strong>Breakfast:</strong> {{ d.morning.breakfast }}</li>
            <li><strong>Place To Visit:</strong> {{ d.morning.place_to_visit }}</li>
            <li><strong>Duration:</strong> {{ d.morning.duration }}</li>
            <li><strong>Travel:</strong> {{ d.morning.transport_to_next }}</li>
          </ul>
        </div>

        <!-- AFTERNOON -->
        <div class="slot-title">Afternoon</div>
        <div class="slot-desc">
          <ul>
            <li><strong>Lunch:</strong> {{ d.afternoon.lunch }}</li>
            <li><strong>Place To Visit:</strong> {{ d.afternoon.place_to_visit }}</li>
            <li><strong>Duration:</strong> {{ d.afternoon.duration }}</li>
            <li><strong>Travel:</strong> {{ d.afternoon.transport_to_next }}</li>
          </ul>
        </div>

        <!-- NIGHT -->
        <div class="slot-title">Night</div>
        <div class="slot-desc">
          <ul>
            <li><strong>Dinner:</strong> {{ d.evening.dinner }}</li>
            <li><strong>Place To Visit:</strong> {{ d.evening.place_to_visit }}</li>
            <li><strong>Duration:</strong> {{ d.evening.duration }}</li>
            <li><strong>Travel Back:</strong> {{ d.evening.transport_to_next }}</li>
          </ul>
        </div>

        {% if d.day_tips %}
        <div class="tips"><strong>Day Tip:</strong> {{ d.day_tips }}</div>
        {% endif %}

        {% if d.transport_note_if_long %}
        <div class="tips"><strong>Travel Note:</strong> {{ d.transport_note_if_long }}</div>
        {% endif %}

      </td>
    </tr>
  </table>

</div>
{% endfor %}

<!-- EXTRAS -->
<div class="section-wrap">

  <div class="section">
    <h3>Famous Shopping Recommendations üõçÔ∏è</h3>
    <p>{{ extras.famous_shopping | default('Local markets and downtown shops for souvenirs.') }}</p>
  </div>

  <div class="section">
    <h3>What to Pack üéí</h3>
    <p>{{ extras.what_to_pack | default('Comfortable shoes, sunscreen, light jacket, power bank.') }}</p>
  </div>

  <div class="section">
    <h3>Safety Rules üîí</h3>
    <p>{{ extras.safety_rules | default('Secure valuables, avoid poorly lit areas at night, use licensed taxis.') }}</p>
  </div>

  <div class="section">
    <h3>Extra Travel Tips ‚úàÔ∏è</h3>
    <p>{{ extras.extra_travel_tips | default('Book popular attractions ahead, carry water, use offline maps.') }}</p>
  </div>

  <div class="section">
    <h3>Estimated Total Budget üíµ</h3>
    <p>{{ extras.estimated_total_budget | default('Approx: $200 - $800 per person depending on choices.') }}</p>
  </div>

  <div class="section">
    <h3>Closing Note ‚ú®</h3>
    <p>{{ extras.closing_note | default('Have an amazing trip ‚Äî explore, relax, and take photos!') }}</p>
  </div>

</div>

</body>
</html>
